
<!doctype html>
<html lang="ro">
  <head>
    <!-- Static SEO Tags - Fallbacks for initial page load -->
    <title>MusicGift.ro - Cadouri Muzicale Personalizate</title>
    <meta name="description" content="Creează melodii personalizate și cadouri muzicale unice. Servicii profesionale de compoziție. Peste 2000 melodii create cu dragoste." />
    
    <!-- Open Graph Meta Tags -->
<meta property="og:title" content="MusicGift – Personalized Songs by Mango Records" />
<meta property="og:description" content="Create emotional and unique musical gifts, crafted just for your story. Explore our custom song packages!" />
<meta property="og:image" content="https://www.musicgift.ro/uploads/logo.png" />
<meta property="og:image:type" content="logo" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:url" content="https://www.musicgift.ro/" />
<meta property="og:type" content="website" />
<meta property="og:locale" content="ro_RO" />
<meta property="og:site_name" content="MusicGift" />
    <meta charset="UTF-8" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- Enhanced Critical Resource Preloads for LCP -->
    <link rel="preload" href="/uploads/logo_musicgift.webp" as="image" type="image/webp" fetchpriority="high">
    <link rel="preload" href="/uploads/background.webp" as="image" type="image/webp" fetchpriority="high">
    
    <!-- Enhanced DNS Prefetch and Preconnect for Performance -->
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://conversations-widget.brevo.com">
    <link rel="dns-prefetch" href="https://www.google-analytics.com">
    <link rel="dns-prefetch" href="https://www.googletagmanager.com">
    
    <!-- Enhanced Preconnect for Critical Resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Critical Resource Preloads with Priority Hints -->
    <link rel="preload" href="/uploads/e53a847b-7672-4212-aa90-b31d0bc6d328.png" as="image" type="image/png" fetchpriority="high">
    <link rel="modulepreload" href="/src/main.tsx" fetchpriority="high">
    
    <!-- Enhanced Critical CSS for Above-the-Fold Content and Core Web Vitals -->
    <style>
      /* Critical CSS for Core Web Vitals optimization */
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      
      html {
        scroll-behavior: smooth;
      }
      
      body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        line-height: 1.5;
        background-image: url('/uploads/background.webp');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        background-attachment: fixed;
        text-rendering: optimizeSpeed;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        font-display: swap;
      }
      
      /* Critical logo styles for LCP optimization */
      .logo-critical {
        width: 8rem;
        height: auto;
        transition: transform 0.3s ease;
        will-change: transform;
        content-visibility: auto;
        contain-intrinsic-size: 256px 64px;
        contain: layout style paint;
        transform: translate3d(0, 0, 0);
        backface-visibility: hidden;
      }
      
      @media (min-width: 640px) {
        .logo-critical { width: 10rem; }
      }
      
      @media (min-width: 768px) {
        .logo-critical { width: 12rem; }
      }
      
      @media (min-width: 1024px) {
        .logo-critical { width: 15rem; }
      }
      
      /* Critical navigation styles with containment */
      .nav-critical {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 50;
        background: rgba(0, 0, 0, 0.9);
        backdrop-filter: blur(8px);
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        will-change: transform;
        contain: layout style paint;
        isolation: isolate;
      }
      
      /* Prevent Cumulative Layout Shift (CLS) */
      .video-hero-critical {
        height: 60vh;
        position: relative;
        overflow: hidden;
        content-visibility: auto;
        contain-intrinsic-size: 100vw 60vh;
        contain: layout style paint;
      }
      
      @media (min-width: 640px) {
        .video-hero-critical { 
          height: 70vh;
          contain-intrinsic-size: 100vw 70vh;
        }
      }
      
      @media (min-width: 768px) {
        .video-hero-critical { 
          height: 80vh;
          contain-intrinsic-size: 100vw 80vh;
        }
      }
      
      @media (min-width: 1024px) {
        .video-hero-critical { 
          height: 100vh;
          contain-intrinsic-size: 100vw 100vh;
        }
      }
      
      /* Enhanced hardware acceleration for performance */
      .hw-accelerated {
        transform: translate3d(0, 0, 0);
        will-change: transform;
        backface-visibility: hidden;
        perspective: 1000px;
      }
      
      /* Critical main content styles for LCP optimization */
      .main-lcp-critical {
        background-image: url('/uploads/background.webp');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        background-attachment: fixed;
        contain: layout style paint;
        content-visibility: auto;
      }
      
      /* Critical loading skeleton for better perceived performance */
      .loading-skeleton {
        background: linear-gradient(
          90deg,
          rgba(255, 255, 255, 0.1) 25%,
          rgba(255, 255, 255, 0.2) 50%,
          rgba(255, 255, 255, 0.1) 75%
        );
        background-size: 200% 100%;
        animation: shimmer 1.5s infinite;
      }
      
      @keyframes shimmer {
        0% { background-position: -200% 0; }
        100% { background-position: 200% 0; }
      }
      
      /* Critical button styles for better FID */
      button {
        touch-action: manipulation;
        will-change: transform;
        transition: transform 0.15s ease-out;
        cursor: pointer;
      }
      
      button:hover {
        transform: translate3d(0, -1px, 0);
      }
      
      /* Critical focus styles for accessibility */
      :focus-visible {
        outline: 2px solid #3b82f6;
        outline-offset: 2px;
      }
      
      /* Reduced motion preferences */
      @media (prefers-reduced-motion: reduce) {
        *, *::before, *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }
    </style>
  </head>
  
  <body>
    <div id="root"></div>
    
    <!-- Optimized script loading - only essential scripts initially -->
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- Deferred non-critical scripts for optimal performance -->
    <script>
      // Optimized script loader - loads only when needed
      class OptimizedScriptLoader {
        constructor() {
          this.loadedScripts = new Set();
          this.pendingScripts = new Map();
          this.initializeOnInteraction();
        }
        
        initializeOnInteraction() {
          const events = ['scroll', 'mouseover', 'touchstart', 'keydown'];
          const onFirstInteraction = () => {
            this.loadNonCriticalScripts();
            events.forEach(event => 
              document.removeEventListener(event, onFirstInteraction, { passive: true })
            );
          };
          
          events.forEach(event => 
            document.addEventListener(event, onFirstInteraction, { passive: true })
          );
          
          // Fallback - load after 3 seconds if no interaction
          setTimeout(onFirstInteraction, 3000);
        }
        
        loadNonCriticalScripts() {
          // Load Analytics
          this.loadScript('https://www.googletagmanager.com/gtag/js?id=G-EHVL7BL5FS', () => {
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-EHVL7BL5FS', {
              page_title: document.title,
              page_location: window.location.href
            });
          });
          
          // Load Brevo Conversations - only when really needed
          setTimeout(() => {
            (function(d, w, c) {
              w.BrevoConversationsID = '68374d9e93ba39a2030dfb0e';
              w[c] = w[c] || function() {
                (w[c].q = w[c].q || []).push(arguments);
              };
              var s = d.createElement('script');
              s.async = true;
              s.defer = true;
              s.src = 'https://conversations-widget.brevo.com/brevo-conversations.js';
              if (d.head) d.head.appendChild(s);
            })(document, window, 'BrevoConversations');
          }, 5000);
        }
        
        loadScript(src, callback) {
          if (this.loadedScripts.has(src)) {
            callback && callback();
            return;
          }
          
          if (this.pendingScripts.has(src)) {
            this.pendingScripts.get(src).push(callback);
            return;
          }
          
          this.pendingScripts.set(src, callback ? [callback] : []);
          
          const script = document.createElement('script');
          script.src = src;
          script.async = true;
          script.defer = true;
          
          script.onload = () => {
            this.loadedScripts.add(src);
            const callbacks = this.pendingScripts.get(src) || [];
            callbacks.forEach(cb => cb && cb());
            this.pendingScripts.delete(src);
          };
          
          script.onerror = () => {
            console.warn('Failed to load script:', src);
            this.pendingScripts.delete(src);
          };
          
          document.head.appendChild(script);
        }
      }
      
      // Initialize optimized loading only after DOM is ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', () => new OptimizedScriptLoader());
      } else {
        new OptimizedScriptLoader();
      }
    </script>
  </body>
</html>
